def send<msg> & count<n> |>
      match n with
        20 -> 0
      | n' -> { let t = readTemp(machineId());
                run send<msg> & add<n,1,count> & msg<t>
              }
 or connect<> |>
      { match search("server") with
          Nothing -> { run connect<> }
        | Just msg -> { run send<msg> } }
 in connect<> & count<0>
